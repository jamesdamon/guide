

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OAIRepository Admin Guide &mdash; tind-doc 1.0.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="tind-doc 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="Guide for System Administrators" href="index.html"/>
        <link rel="next" title="Publiline Admin Guide" href="publiline-admin-guide.html"/>
        <link rel="prev" title="OAIHarvest Admin Guide" href="oaiharvest-admin-guide.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> tind-doc</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../librarian/index.html">Guide for Librarians</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../librarian/create-collection.html">Create Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../librarian/export-xml.html">Export data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../librarian/restrict-documents.html">Make documents restricted</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guide for System Administrators</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bibauthority-admin-guide.html">BibAuthority Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibcheck-admin-guide.html">BibCheck Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibcirculation-admin-guide.html">BibCirculation Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibclassify-admin-guide.html">BibClassify Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibconvert-admin-guide.html">BibConvert Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibedit-admin-guide.html">BibEdit Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibexport-admin-guide.html">BibExport Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibformat-admin-guide.html">BibFormat Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibindex-admin-guide.html">BibIndex Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibknowledge-admin-guide.html">BibKnowledge Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibmatch-admin-guide.html">BibMatch Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibrank-admin-guide.html">BibRank Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibsched-admin-guide.html">BibSched Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibsort-admin-guide.html">BibSort Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibsword-client-admin-guide.html">BibSword client Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibupload-admin-guide.html">BibUpload Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="docextract-admin-guide.html">DocExtract Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="elmsubmit-admin-guide.html">ElmSubmit Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="oaiharvest-admin-guide.html">OAIHarvest Admin Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">OAIRepository Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="publiline-admin-guide.html">Publiline Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webcomment-admin-guide.html">WebComment Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webjournal-admin-guide.html">WebJournal Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webjournal-editor-guide.html">WebJournal Editor Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webmessage-admin-guide.html">WebMessage Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="websearch-admin-guide.html">WebSearch Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="websession-admin-guide.html">WebSession Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webstat-admin-guide.html">WebStat Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="webstyle-admin-guide.html">WebStyle Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="websubmit-admin-guide.html">WebSubmit Admin Guide</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Guide for tools.tind.io</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/xml-manipulation.html">XML Manipulation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/index.html">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../doc/intro.html">MARC intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/docguide.html">Site template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc/use-of-marc.html">MARC Fields</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">tind-doc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Guide for System Administrators</a> &raquo;</li>
      
    <li>OAIRepository Admin Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/admin/oairepository-admin-guide.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="oairepository-admin-guide">
<span id="id1"></span><h1>OAIRepository Admin Guide<a class="headerlink" href="#oairepository-admin-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The OAI Repository module handles metadata delivery between OAI-PMH
v.2.0 compliant repositories. Metadata exchange is performed on top of
the <a class="reference external" href="http://www.openarchives.org/pmh/">OAI-PMH</a>, the Open Archives
Initiative&#8217;s Protocol for Metadata Harvesting. The OAI Repository Admin
Interface can be used to set up a database of OAI sources and open your
repository for OAI harvesting.</p>
</div>
<div class="section" id="oai-repository-exporting">
<h2>2. OAI Repository (<em>Exporting</em>)<a class="headerlink" href="#oai-repository-exporting" title="Permalink to this headline">¶</a></h2>
<p>The OAI Repository corresponds to a set of metadata exposed for
periodical harvesting by external OAI service providers. The following
steps have to be done in order to expose metadata via OAI:</p>
<ul class="simple">
<li>Definition of OAI sets</li>
<li>Exposing metadata via OAI Repository Gateway</li>
</ul>
<div class="section" id="definition-of-oai-sets">
<h3>2.1. Definition of OAI sets<a class="headerlink" href="#definition-of-oai-sets" title="Permalink to this headline">¶</a></h3>
<p>The definition of the OAI sets in the <a class="reference external" href="/admin/oairepository/oairepositoryadmin.py">OAI Repository Admin
Interface</a>
lets you choose:</p>
<ol class="arabic simple">
<li>which records are to be exposed via OAI, by using the standard
<a class="reference external" href="/help/search-guide">Invenio search syntax</a>.</li>
<li>which <a class="reference external" href="http://www.openarchives.org/OAI/openarchivesprotocol.html#Set">OAI
sets</a>
are available in your repository. Simply specify the <tt class="docutils literal"><span class="pre">setSpec</span></tt> and
<tt class="docutils literal"><span class="pre">setName</span></tt> of the set.</li>
</ol>
<p>Let&#8217;s say you want to expose all the records in the collection
&#8220;<tt class="docutils literal"><span class="pre">Articles</span></tt>&#8221; that have a report number starting with
<a class="reference external" href="/search?f1=reportnumber&amp;c=Articles&amp;p1=hep-*&amp;as=1">hep-</a>:
simply add a new set definition in the <a class="reference external" href="/admin/oairepository/oairepositoryadmin.py">OAI Repository Admin
Interface</a>,
choose the <tt class="docutils literal"><span class="pre">setName</span></tt> (Eg: &#8220;HEP Articles&#8221;) and <tt class="docutils literal"><span class="pre">setSpec</span></tt> (Eg:
&#8220;articles:hep&#8221;), and fill in the <tt class="docutils literal"><span class="pre">collection</span></tt> field with &#8220;Articles&#8221;,
the first <tt class="docutils literal"><span class="pre">Phrase</span></tt> field with &#8220;hep-*&#8221; and choose search field &#8220;report
number&#8221;.</p>
<p>If you want to export all the records in your repository, just leave all
the query parameters blank. You can also omit the OAI setSpec and
setName if you do not want to organize your repository into a hierarchy.</p>
<p>If you want to force all the clients currently harvesting a given set
you are exporting (e.g. because you have enriched a metadata export
format) you can simply touch the corresponding set.</p>
<p>Tip: since the exposed records are retrieved using the Invenio search
engine, you can test your query definition in the <a class="reference external" href="/?as=1">advanced search
interface</a> of your repostory.</p>
</div>
<div class="section" id="exposing-metadata-via-oai-repository-gateway">
<h3>2.2. Exposing metadata via OAI Repository Gateway<a class="headerlink" href="#exposing-metadata-via-oai-repository-gateway" title="Permalink to this headline">¶</a></h3>
<div class="section" id="oairepositoryupdater-commmand-line-tool">
<h4>2.2.1 oairepositoryupdater commmand-line tool<a class="headerlink" href="#oairepositoryupdater-commmand-line-tool" title="Permalink to this headline">¶</a></h4>
<p>Once the settings of the OAI Repository are defined, the next step is
to expose the corresponding metadata via the OAI Repository Gateway. This is
done by launching the <tt class="docutils literal"><span class="pre">oairepositoryupdater</span></tt> script, that will add the
OAI identifier and OAI setSpec(s) to the records to be exposed
(according to the settings defined in the OAI Repository admin
interface).</p>
<p><strong>Oairepositoryupdater usage</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>oairepositoryupdater [options]

Options:
  -r --report            OAI repository status
  -d --detailed-report   OAI repository detailed status
  -n --no-process        Do no upload the modifications

Scheduling options:
  -u, --user=USER       User name to submit the task as, password needed.
  -t, --runtime=TIME    Time to execute the task (now), e.g.: +15s, 5m, 3h, 2002-10-27 13:57:26
  -s, --sleeptime=SLEEP Sleeping frequency after which to repeat task (no), e.g.: 30m, 2h, 1d
  -P, --priority=PRIORITY       Priority level (an integer, 0 is default)
  -N, --task_specific_name=TASK_SPECIFIC_NAME   Advanced option

General options:
  -h, --help            Print this help.
  -V, --version         Print version information.
  -v, --verbose=LEVEL   Verbose level (0=min, 1=default, 9=max).

Print OAI repository status
  $ oairepositoryupdater -r
Print OAI repository detailed status
  $ oairepositoryupdater -d
</pre></div>
</div>
</div></blockquote>
<p><strong>Oaiharvest usage examples</strong></p>
<p>To expose the sets defined in the OAI Repository Admin Interface and
update them every day:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>$ oairepositoryupdater -s24
</pre></div>
</div>
</div></blockquote>
<p>To print out the current status of your OAI repository. Note that this
is a quick report that might not be accurate if you repository is out of
sync. See oairepositoryupdater -d for a more accurate ( but slower)
report:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>$ oairepositoryupdater -r
</pre></div>
</div>
</div></blockquote>
<p>To print out the detailed status of your OAI repository:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>$ oairepositoryupdater -d
</pre></div>
</div>
</div></blockquote>
<p>Please see also invenio.conf for more detailed configuration of the OAI
Repository.</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publiline-admin-guide.html" class="btn btn-neutral float-right" title="Publiline Admin Guide"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="oaiharvest-admin-guide.html" class="btn btn-neutral" title="OAIHarvest Admin Guide"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Kenneth Hole.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>